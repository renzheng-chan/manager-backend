<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>慧养中国官网</title>
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./MI.css">
    <link rel="stylesheet" href="./小米图标字体/iconfont.css">
    <link rel="stylesheet" href="./homepage/MI.css">
</head>
<body>
    
    <!-- 创建头部导航栏大容器 -->
    <div class="nav-header-max">
        <!-- 创建头部导航栏容器 -->
        <div class="nav-header">
            <!-- 创建头部导航栏左侧logo -->
            <div class="logo">
                <a class="home" href="javascript:;"></a>
                <a class="mi" href="javascript:;"></a>
            </div>
            <!-- 创建导航栏商品列表 -->
            <ul class="goods-list">
                
                <li class="goods-show">
                    <a href="javascript:;">团队简介</a>
                </li>
    
                <div class="goods-container">
                    <ul class="goods-drop-down">
                        <li>
                            <a href="javascript:;">
                                <div class="goods-img">
                                    <img src="./私人定制图片/12.png">
                                </div>
                                <div class="goods-discription">黄拓森</div>
                                <p class="goods-price">技术工具人</p>
                            </a>
                        </li>
                        <li class="goods-border"></li>
                        <li>
                            <a href="javascript:;">
                                <div class="goods-img">
                                    <img src="./私人定制图片/18.png">
                                </div>
                                <div class="goods-discription">郑子宜</div>
                                <p class="goods-price">董事长</p>
                            </a>
                        </li>
                        <li class="goods-border"></li>
                        <li>
                            <a href="javascript:;">
                                <div class="goods-img">
                                    <img src="./私人定制图片/17.png">
                                </div>
                                <div class="goods-discription">郑欣悦</div>
                                <p class="goods-price">CEO</p>
                            </a>
                        </li>
                        <li class="goods-border"></li>
                        <li>
                            <a href="javascript:;">
                                <div class="goods-img">
                                    <img src="./私人定制图片/19.png">
                                </div>
                                <div class="goods-discription">吉帕银花</div>
                                <p class="goods-price">财务总监</p>
                            </a>
                        </li>
                        <li class="goods-border"></li>
                        <li>
                            <a href="javascript:;">
                                <div class="goods-img">
                                    <img src="./私人定制图片/16.png">
                                </div>
                                <div class="goods-discription">郑博文</div>
                                <p class="goods-price">战略策划总监</p>
                            </a>
                        </li>
                        <li class="goods-border"></li>
                        <li>
                            <a href="javascript:;">
                                <div class="goods-img">
                                    <img src="./私人定制图片/21.png">
                                </div>
                                <div class="goods-discription">团队合照</div>
                                <p class="goods-price">合照</p>
                            </a>
                        </li>
                    </ul>
                </div>
            </ul>
            <!-- 创建头部导航栏右侧输入框 -->
            <div class="search">
                <form action="/">
                    <input class="shuruk" name="sousu" type="text">
                    <button class="iconfont button" >&#xe601;</button>
                </form>
            </div>
        </div>
    </div>
    <!-- 创建滚动图容器 -->
    <div id="outroll">
        <ul id="imglistroll">
            <li>
                <a href="javascript:;">
                    <img class="roll-picture" src="./小米滚动图/01.jpg">
                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <img class="roll-picture" src="./小米滚动图/02.jpg">
                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <img class="roll-picture" src="./小米滚动图/03.jpg">
                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <img class="roll-picture" src="./小米滚动图/04.jpg">
                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <img class="roll-picture" src="./小米滚动图/05.jpg">
                </a>
            </li>
            <!-- 在图片最后添加第一张图，当轮播到最后一张时，瞬间切换至第一张，实现无缝循环轮播 -->
            <li>
                <a href="javascript:;">
                    <img class="roll-picture" src="./小米滚动图/01.jpg">
                </a>
            </li>
        </ul>
        <div id="nav">
            <a href="javascript:;"></a>
            <a href="javascript:;"></a>
            <a href="javascript:;"></a>
            <a href="javascript:;"></a>
            <a href="javascript:;"></a>
        </div>
    </div>
    <!-- 创建底部大容器 -->
    <div class="bottom-container">
        <!-- 创建底部左侧 -->
        <ul class="bottom-left">
            <li>
                <a href="javascript:;">
                    <i class="iconfont">&#xe601;</i>
                </a>
            </li>
            <li class="border-shu"></li>
            <li>
                <a href="javascript:;">
                    <i class="iconfont">&#xe615;</i>
                </a>
            </li>
            <li class="border-shu"></li>
            <li>
                <a href="javascript:;">
                    <i class="iconfont">&#xe654;</i>
                </a>
            </li>
            <li class="border-heng the-first"></li>
            <li class="border-heng second"></li>
            <li class="border-heng third"></li>
            <li>
                <a href="javascript:;">
                    <i class="iconfont">&#xe60f;</i>
                </a>
            </li>
            <li class="border-shu"></li>
            <li>
                <a href="javascript:;">
                    <i class="iconfont">&#xe600;</i>
                </a>
            </li>
            <li class="border-shu"></li>
            <li>
                <a href="javascript:;">
                    <i class="iconfont">&#xe621;</i>
                </a>
            </li>
        </ul>
        <!-- 创建底部右侧图片列表 -->
        <ul class="bottom-picture">
            <li>
                <a href="javascrirpt:;">
                    <img src="./小米底部图片/01.png">
                </a>
            </li>
            <li>
                <a href="javascrirpt:;">
                    <img src="./小米底部图片/02.png">
                </a>
            </li>
            <li>
                <a href="javascrirpt:;">
                    <img src="./小米底部图片/04.png">
                </a>
            </li>
        </ul>
    </div>
   
</body>
<script>
    //获取imglistroll
    var imgListRoll = document.getElementById("imglistroll");
    //获取滚动图片, 通过class获取需要兼容IE8
    var imgRoll = document.querySelectorAll(".roll-picture");
    // var imgRoll = getClass("img", "roll-picture");
    // //创建获取class的函数
    // function getClass(tagname, clsname){
    //     if(document.getElementsByClassName){
    //         objarr = document.getElementsByClassName(clsname);
    //         return objarr;  
    //     }else{
    //         //创建一个数组用来保存接收目标值
    //         objarr = [];
    //         //获取所有目标tagetname
    //         var alltaget = document.getElementsByTagName(tagname);
    //         //遍历
    //         for(var i = 0; i < alltaget.length; i++){
    //             if(alltaget[i].className == clsname){
    //                 objarr.push(alltaget[i]);
                    
    //             }
    //         }
    //         return objarr;
    //     }
    // }
    //获取滚动图外部容器
    var outRoll = document.getElementById("outroll");
    //根据图片的数量设置图片容器的宽度
    imgListRoll.style.width =  imgRoll.length * outRoll.offsetWidth + "px";
    //获取所有导航点a
    var rollA = document.getElementById("nav").children;
    //初始化索引
    var index = 0;
    //初始化导航点
    rollA[index].style.backgroundColor = "grey";
    //遍历导航点a
    for(var i = 0; i < rollA.length; i++){
        //为数组中每个a对象中添加num属性来保存其索引
        rollA[i].num = i;
        //为每个导航点绑定单击函数
        rollA[i].onclick = function(){
            //点击时关闭自动定时器
            clearInterval(timr);
            //点击时，切换之前获取当前的偏移量
            var befor = imgListRoll.offsetLeft;
            //将每个a对象里面保存的num的值赋值给index
            index = this.num;
            //通过改变滚图容器的left值实现切换效果, 这里index的值乘以外部容器的宽度即可得到目标left值
            //imgListRoll.style.left = -outRoll.offsetWidth * index + "px"; 
            //调用动画函数来切换图片
            if(Math.abs(Math.abs(outRoll.offsetWidth * index) - Math.abs(befor)) <= Math.abs(outRoll.offsetWidth)){
                move(imgListRoll, 21, -outRoll.offsetWidth * index, function(){
                    //动画执行完毕调用自动定时器
                    
                });
            }
            else{
               imgListRoll.style.left = -outRoll.offsetWidth * index + "px"; 
               clearInterval(imgListRoll.timr);
               //alert(123);
               //动画执行完毕调用自动定时器
            }
            autoChange();
            //调用导航点选中函数
            setA();
        }
    }
    //创建导航点选中函数
    function setA(){
        //当图片跳至最后一张设置第一个导航点选中
        if(index == imgRoll.length -1){
            //通过index将第一个导航点设置为选中
            index = 0;
            //图片调至最后一张时，瞬间将其切换回第一张继续轮播
            imgListRoll.style.left = 0;
        }
        //在设置选中前初始化所有导航点
        for(var i = 0; i < rollA.length; i++){
            //将所有导航点设置为无色，内联样式没有，CSS样式即生效
            rollA[i].style.backgroundColor = "";
        }
        //将目标导航点设置为选中,这里通过接收index的值，来设置与滚图对应的导航点
        rollA[index].style.backgroundColor = "grey";
    }
    //创建切换动画函数
    function move(obj, speed, end, callback){
        //关闭上一个定时器，防止多次点击多次开启
        clearInterval(obj.timr);
         //获取滚图容器初始left值
        var oldValue = obj.offsetLeft;
        //判断滚图的移动方向
        if(oldValue > end){
            //进入判断说明滚图向左移动(图片左滑)
            speed = -speed;
        }
        //开启定时.并将标识保存在对象的属性中
        obj.timr = setInterval(function(){
            //获取滚图容器初始left值
            var oldValue = obj.offsetLeft;
            //每次调用增加left值得到新值
            var newValue = oldValue + speed;
            //当图片左滑时
            if((newValue < end && speed < 0) || (newValue > end && speed > 0)){
                newValue = end;
            }
            //设置滚图的left值
            obj.style.left = newValue + "px";
            //当达到目标值时，关闭定时器
            if(newValue == end){
                clearInterval(obj.timr);
                //回调函数，动画执行完毕执行回调，有则执行，没有则不执行
                callback && callback();
            }
        }, 10)
    }
    //调用自动切换图片函数
    autoChange();
    //标识自动定时器
    var timr;
    //创建自动切换函数
    function autoChange(){
        //开启定时器
        timr = setInterval(function(){
            //这里index的值，是通过点击改变的，而index的值改变才能使图片切换，所以这里使index自增
            index++;
            //限制index的值
            index %= imgRoll.length;
            //调用move函数
            move(imgListRoll, 21, -outRoll.offsetWidth * index, function(){
                //调用setA函数，使其跟随图片的自动切换设置a的选中
                setA();
            });
        }, 3000)
    }
    //获取下方滚动图容器
    var roll1 = document.getElementById("gdt1");
    var ttt;
    //开启定时器
    ttt = setInterval(function(){
        //判断图片是否轮完
        var oldd = roll1.offsetLeft;
        if(oldd <= -1390){
            roll1.style.left = 0 + "px"
        }
        //获取滚图容器初始left值
        var oldValue1 = roll1.offsetLeft;
        //alert(oldValue1)
            //每次调用增加left值得到新值
        var newValue1 = oldValue1 - 2;
        //alert(newValue1)
        roll1.style.left = newValue1 + "px";
    },20)
</script>
</html>